<div class="row">
  <div class="col-md-6">
    <h2 class="page-header">Application users list </h2>
  </div>
  <div *ngIf="total > 0" class="col-md-6">
    <div class="input-group input-group-sm input-group-left">
      <input type="text" class="form-control" name="search" [(ngModel)]="filter">
      <span class="input-group-addon">
        <i class="glyphicon glyphicon-search"></i>
      </span>
    </div>
  </div>
</div>

<p *ngIf="total == 0" class="lead"> Sorry :( <p>
<p *ngIf="total == 0" class="lead"> There are no registered users at the moment. <span class="glyphicon glyphicon-phone"></span> <span class="glyphicon glyphicon-road"></span></p>

<table *ngIf="total > 0" class="table table-striped table-hover">
  <thead>
    <tr>
      <th (click)="sort('id')">Id
        <span class="glyphicon sort-icon" *ngIf="key == 'id'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
      </th>
      <th (click)="sort('_ref')">_ref
        <span class="glyphicon sort-icon" *ngIf="key == '_ref'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
      </th>
      <th (click)="sort('applicationOwner')">Application owner
        <span class="glyphicon sort-icon" *ngIf="key == 'applicationOwner'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
      </th>
      <th (click)="sort('type')">Type
        <span class="glyphicon sort-icon" *ngIf="key == 'type'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
      </th>
      <th (click)="sort('cars')">Cars
        <span class="glyphicon sort-icon" *ngIf="key == 'cars'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
      </th>
      <th (click)="sort('username')">Username
        <span class="glyphicon sort-icon" *ngIf="key == 'username'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
      </th>
      <th (click)="sort('name')">Name
        <span class="glyphicon sort-icon" *ngIf="key == 'name'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
      </th>
      <th (click)="sort('surname')">Surname
        <span class="glyphicon sort-icon" *ngIf="key == 'surname'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
      </th>
      <th (click)="sort('country')">Country
        <span class="glyphicon sort-icon" *ngIf="key == 'country'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
      </th>
      <th (click)="sort('email')">Email
        <span class="glyphicon sort-icon" *ngIf="key == 'email'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
      </th>
      <th (click)="sort('birthdate')">Birthdate
        <span class="glyphicon sort-icon" *ngIf="key == 'birthdate'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
      </th>
      <th (click)="sort('images')">Images
        <span class="glyphicon sort-icon" *ngIf="key == 'images'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
      </th>
      <th (click)="sort('balance')">Balance
        <span class="glyphicon sort-icon" *ngIf="key == 'balance'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of usersList | orderBy: key : reverse | filter:filter | paginate: {itemsPerPage: 10, currentPage: p, totalItems: total }">
      <td>{{user.id}}</td>
      <td>{{user._ref}}</td>
      <td>{{user.applicationOwner}}</td>
      <td>{{user.type}}</td>
      <td>{{obtainUserCars(user.cars)}}</td>
      <td>{{user.username}}</td>
      <td>{{user.name}}</td>
      <td>{{user.surname}}</td>
      <td>{{user.country}}</td>
      <td>{{user.email}}</td>
      <td>{{user.birthdate}}</td>
      <td>{{user.images.join(', ')}}</td>
      <td>{{obtainUserBalance(user.balance)}}</td>
    </tr>
  </tbody>
  <pagination-controls (pageChange)="p = $event"></pagination-controls>
</table>
